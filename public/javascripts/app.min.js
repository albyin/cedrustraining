var app=angular.module("ngMyApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode({enabled:!0,requireBase:!1}),a.when("/",{templateUrl:"/page/home",controller:"mainController"}).when("/posts",{templateUrl:"/page/posts",controller:"postsController"}).when("/members",{templateUrl:"/page/members",controller:"usersController"}).when("/login",{templateUrl:"/page/login",controller:"loginController"}).when("/register/1",{templateUrl:"/register/1",controller:"register1Controller"}).when("/register/2",{templateUrl:"/register/2",controller:"register2Controller"}).otherwise({redirectTo:"/"})}]),app.controller("loginController",["$scope",function(a){}]),app.controller("mainController",["$scope","Auth",function(a,b){a.title="Title comes from the controller",b.getUserInfo().then(function(b){a.user=b})}]),app.controller("postsController",["$scope","Posts","Comments",function(a,b,c){b.get().then(function(b){a.posts=b}),a.toggleComments=function(a){a.comments?a.comments=void 0:c.getAllByPostId(a.id).then(function(b){a.comments=b})}}]),app.controller("register1Controller",["$scope","$http","NewCustomer",function(a,b,c){a.submitForm=function(b){if(b){c.addInfo(a.customer);var d=c.submit();d.then(function(a){console.log("NewCustomer Submit results: ",a.data)})}}}]),app.controller("register2Controller",["$scope","NewCustomer",function(a,b){a.submitForm=function(c){c&&b.addInfo(a.customer)}}]),app.controller("usersController",["$scope","Posts","Users",function(a,b,c){c.get().then(function(b){a.users=b}),a.togglePosts=function(a){a.posts?a.posts=void 0:b.getAllByUserId(a.id).then(function(b){a.posts=b})}}]),app.factory("Auth",["$http",function(a){return{getUserInfo:function(){return a.get("/authUserInfo").then(function(a){return a.data})}}}]),app.factory("APIConfig",[function(){return{devRoot:"http://jsonplaceholder.typicode.com/",prodRoot:"",env:"dev",setEnv:function(){},getRoot:function(){return"dev"===this.env?this.devRoot:"prod"===this.env?this.prodRoot:null}}}]),app.factory("Posts",["$http","APIConfig",function(a,b){return{get:function(){return a.get(b.getRoot()+"posts/").then(function(a){return a.data})},getAllByUserId:function(c){return a.get(b.getRoot()+"posts?userId="+c).then(function(a){return a.data})}}}]),app.factory("Comments",["$http","APIConfig",function(a,b){return{get:function(){return a.get(b.getRoot()+"comments/").then(function(a){return a.data})},getAllByPostId:function(c){return a.get(b.getRoot()+"comments?postId="+c).then(function(a){return a.data})}}}]),app.factory("Users",["$http","APIConfig",function(a,b){return{get:function(){return a.get(b.getRoot()+"users/").then(function(a){return a.data})}}}]),app.factory("NewCustomer",["$http",function(a){return{info:{},addInfo:function(a){var b;for(b in a)this.info[b]=a[b]},getInfo:function(){return this.info},submit:function(){return a.post("/register",this.info)}}}]);